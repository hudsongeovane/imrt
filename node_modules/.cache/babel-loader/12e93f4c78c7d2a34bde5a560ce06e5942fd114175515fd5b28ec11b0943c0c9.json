{"ast":null,"code":"function isEqualSegment(a, b) {\n  for (let i = 0; i < a.length; i++) {\n    if (a[i][0] !== b[i][0] || a[i][1] !== b[i][1]) return false;\n  }\n  return true;\n}\nfunction max(a, b) {\n  if (a > b) return a;\n  return b;\n}\nfunction min(a, b) {\n  if (a < b) return a;\n  return b;\n}\nfunction solveRow(row) {\n  let line = row;\n  line.unshift(0);\n  line.push(0);\n  let p = [];\n  let q = [];\n  let L = 0;\n  for (let i = 0; i < line.length; ++i) {\n    L = max(line[i], L);\n  }\n  for (let k = 1; k <= L; ++k) {\n    for (let i = 1; i < line.length; ++i) {\n      if (line[i - 1] < k && k <= line[i]) p.push(i);\n      if (line[i] >= k && k > line[i + 1]) q.push(i);\n    }\n  }\n  let lineSegments = [];\n  for (let i = 0; i < p.length; i++) {\n    lineSegments.push([min(p[i], q[i]) - 1, max(p[i], q[i]) - 1]);\n  }\n  return lineSegments;\n}\nfunction bortfeld(matrix) {\n  let segments = [];\n  let coefficients = [];\n  let lineSegments = [];\n  let maxS = 0;\n  for (let i = 0; i < matrix.length; i++) {\n    let solved_row = solveRow(matrix[i]);\n    lineSegments.push(solved_row);\n    maxS = max(maxS, solved_row.length);\n  }\n  for (let k = 0; k < maxS; k++) {\n    let currentSegment = [];\n    for (let i = 0; i < matrix.length; i++) {\n      let tmp = [];\n      if (k < lineSegments[i].length) {\n        tmp = lineSegments[i][k];\n        console.log(2);\n      } else {\n        if (segments.length == 0) {\n          tmp = [1, 0];\n        } else {\n          let a = segments[-1][i][0];\n          let b = segments[-1][i][1];\n          tmp = [max(a, b), max(a, b) - 1];\n        }\n      }\n      currentSegment.push(tmp);\n    }\n    let sameSegment = false;\n    for (let i = segments.length - 1; i >= 0; i--) {\n      if (isEqualSegment(currentSegment, segments[i])) {\n        coefficients[i]++;\n        sameSegment = true;\n        break;\n      }\n    }\n    if (!sameSegment) {\n      segments.push(currentSegment);\n      coefficients.push(1);\n    }\n  }\n  return [coefficients, segments];\n}\nexport default bortfeld;","map":{"version":3,"names":["isEqualSegment","a","b","i","length","max","min","solveRow","row","line","unshift","push","p","q","L","k","lineSegments","bortfeld","matrix","segments","coefficients","maxS","solved_row","currentSegment","tmp","console","log","sameSegment"],"sources":["/Users/hmedeiros/react-study/imrt/src/algorithms/Bortfeld.js"],"sourcesContent":["function isEqualSegment(a, b) {\n    for(let i = 0; i < a.length; i++) {\n        if (a[i][0] !== b[i][0] || a[i][1] !== b[i][1]) return false;\n    }\n    return true;\n}\n\n\nfunction max(a, b) {\n    if (a > b) return a;\n    return b;\n}\n\nfunction min(a, b) {\n    if (a < b) return a;\n    return b;\n}\n\nfunction solveRow(row) {\n    let line = row;\n    line.unshift(0);\n    line.push(0);\n\n    let p = [];\n    let q = [];\n    let L = 0;\n    for(let i = 0; i < line.length; ++i) {\n        L = max(line[i], L);\n    }\n    for(let k = 1; k <= L; ++k) {\n        for(let i = 1; i < line.length; ++i) {\n            if ((line[i-1] < k) && (k <= line[i])) p.push(i);\n            if ((line[i] >= k) && (k > line[i+1])) q.push(i);\n        }\n    }\n\n    let lineSegments = [];\n    for(let i = 0; i < p.length; i++) {\n        lineSegments.push([min(p[i], q[i])-1, max(p[i], q[i]) - 1])\n    }\n    return lineSegments;\n}\n\nfunction bortfeld(matrix) {\n    let segments = [];\n    let coefficients = [];\n\n    let lineSegments = [];\n    let maxS = 0;\n    for(let i = 0; i < matrix.length; i++) {    \n        let solved_row = solveRow(matrix[i]);\n        lineSegments.push(solved_row);\n        maxS = max(maxS, solved_row.length);\n    }\n    for(let k = 0; k < maxS; k++) {\n        let currentSegment = [];\n        for(let i = 0; i < matrix.length; i++) {\n                let tmp = [];\n                if (k < lineSegments[i].length) {\n                    tmp = lineSegments[i][k];\n                    console.log(2)\n                }\n                else {\n                    if (segments.length == 0) {\n                        tmp = [1, 0];\n                    }\n                    else {\n                        let a = segments[-1][i][0];\n                        let b = segments[-1][i][1];\n                        tmp = [max(a,b), max(a,b)-1];\n                    }\n                }\n                currentSegment.push(tmp);\n        }\n        let sameSegment = false;\n        for(let i = segments.length - 1; i >= 0; i--) {\n            if (isEqualSegment(currentSegment, segments[i])) {\n                coefficients[i]++;\n                sameSegment = true;\n                break;\n            }\n        }\n        if (!sameSegment) {\n            segments.push(currentSegment);\n            coefficients.push(1);\n        }\n    }\n    return [coefficients, segments];\n}\n\nexport default bortfeld;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}